<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>风也曾辉煌过 - 个人博客</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 开场动画样式 */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0f1419;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 1s ease, visibility 1s ease;
        }
        
        .loading-content {
            text-align: center;
            color: #fff;
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        #opening-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }
        
        #opening-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }
        
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .loading-text {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #FFD700;
            opacity: 0;
            animation: fadeIn 1.5s ease forwards 0.5s;
        }
        
        .loading-subtext {
            font-size: 1.2rem;
            color: #fff;
            opacity: 0;
            animation: fadeIn 1.5s ease forwards 1s;
        }
        
        .skip-btn {
            position: absolute;
            bottom: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.3);
            color: #fff;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            z-index: 10000;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            font-weight: bold;
        }
        
        .skip-btn:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
        }
        
        .play-btn {
            position: absolute;
            bottom: 80px;
            right: 30px;
            background: rgba(255, 215, 0, 0.6);
            color: #fff;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            z-index: 10000;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            font-weight: bold;
        }
        
        .play-btn:hover {
            background: rgba(255, 215, 0, 0.8);
            transform: translateY(-2px);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 壁纸选择器样式 */
        .wallpaper-selector {
            position: fixed;
            top: 100px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 15px;
            z-index: 100;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 200px;
        }
        
        .wallpaper-title {
            font-size: 1rem;
            margin-bottom: 10px;
            color: #FFD700;
            text-align: center;
        }
        
        .wallpaper-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .wallpaper-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 8px;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .wallpaper-option:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .wallpaper-option.active {
            background: rgba(255, 215, 0, 0.2);
            border: 1px solid rgba(255, 215, 0, 0.4);
        }
        
        .wallpaper-preview {
            width: 40px;
            height: 25px;
            border-radius: 3px;
            background-size: cover;
            background-position: center;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .wallpaper-name {
            font-size: 0.9rem;
            color: #ddd;
        }
        
        /* 原有样式保持不变 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            color: #fff;
            line-height: 1.6;
            overflow-x: hidden;
            background-color: #0f1419;
        }
        
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            transition: background-image 1s ease;
        }
        
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1s ease, transform 1s ease;
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 40px;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
            color: #FFD700;
        }
        
        .nav-links {
            display: flex;
            gap: 30px;
        }
        
        .nav-links a {
            color: #fff;
            text-decoration: none;
            font-size: 1.1rem;
            transition: all 0.3s;
            padding: 8px 15px;
            border-radius: 5px;
        }
        
        .nav-links a:hover {
            color: #FFD700;
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }
        
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: #fff;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .mobile-nav-links {
            display: none;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
        }
        
        .mobile-nav-links.active {
            display: flex;
        }
        
        .mobile-nav-links a {
            color: #fff;
            text-decoration: none;
            padding: 10px;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .mobile-nav-links a:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .profile-section {
            display: flex;
            margin-bottom: 50px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        
        .avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 30px;
            border: 3px solid rgba(255, 255, 255, 0.2);
            background-color: #2a2a2a;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            font-size: 14px;
            text-align: center;
            flex-shrink: 0;
        }
        
        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .avatar img:hover {
            transform: scale(1.05);
        }
        
        .profile-info {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .profile-info h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .profile-info .username {
            font-weight: bold;
            color: #fff;
            font-size: 1.2rem;
            margin-bottom: 15px;
        }
        
        .profile-info p {
            margin-bottom: 20px;
            max-width: 500px;
        }
        
        /* 时钟样式 */
        .clock-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-left: 30px;
            min-width: 280px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
        
        .clock-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #FFD700;
            text-align: center;
            font-weight: bold;
        }
        
        .clock {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        
        .date-display {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #ddd;
            text-align: center;
        }
        
        .time-display {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.2rem;
            font-weight: bold;
            color: #FFD700;
            background: rgba(0, 0, 0, 0.3);
            padding: 10px 20px;
            border-radius: 10px;
            width: 100%;
            text-align: center;
            letter-spacing: 2px;
            font-family: 'Courier New', monospace;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        
        .time-segment {
            display: inline-block;
            min-width: 40px;
            text-align: center;
        }
        
        .time-separator {
            margin: 0 5px;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
        
        .timezone {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #aaa;
            text-align: center;
        }
        
        .tags-section {
            margin-top: 20px;
        }
        
        .tags-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #ddd;
        }
        
        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .tag {
            background: rgba(255, 215, 0, 0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            transition: all 0.3s;
            border: 1px solid rgba(255, 215, 0, 0.3);
            cursor: pointer;
        }
        
        .tag:hover {
            background: rgba(255, 215, 0, 0.4);
            transform: translateY(-2px);
        }
        
        .blog-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            margin-bottom: 50px;
        }
        
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .blog-content {
            color: #ddd;
            line-height: 1.8;
        }
        
        .blog-content p {
            margin-bottom: 20px;
        }
        
        .blog-content h3 {
            color: #fff;
            margin: 25px 0 15px;
            font-size: 1.3rem;
            border-left: 4px solid #FFD700;
            padding-left: 15px;
        }
        
        .blog-content blockquote {
            border-left: 4px solid #FFD700;
            padding-left: 20px;
            margin: 20px 0;
            font-style: italic;
            color: #bbb;
        }
        
        .theme-summary {
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .theme-summary:last-child {
            border-bottom: none;
        }
        
        .theme-title {
            color: #fff;
            font-size: 1.4rem;
            margin-bottom: 15px;
        }
        
        .theme-core {
            font-weight: bold;
            color: #FFD700;
        }
        
        .essay-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            margin-bottom: 50px;
        }
        
        .search-box {
            position: relative;
            margin-bottom: 20px;
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 1rem;
        }
        
        .search-box i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #aaa;
        }
        
        .stats-panel {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .stats-panel h3 {
            margin-bottom: 15px;
            color: #FFD700;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #aaa;
        }
        
        .draft-notice {
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            padding: 10px 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .draft-notice span {
            color: #FFD700;
        }
        
        .login-form {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #ddd;
        }
        
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }
        
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .btn-primary {
            background: #FFD700;
            color: #333;
        }
        
        .btn-primary:hover {
            background: #ffed4a;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .btn-small {
            padding: 6px 12px;
            font-size: 0.85rem;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
        }
        
        .essay-form {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }
        
        .essay-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .checkbox-group input {
            width: auto;
        }
        
        .media-preview {
            margin: 15px 0;
            display: none;
        }
        
        .media-preview img, .media-preview video {
            max-width: 100%;
            max-height: 300px;
            border-radius: 8px;
            transition: transform 0.3s ease;
        }
        
        .media-preview img:hover {
            transform: scale(1.02);
        }
        
        .essay-list {
            margin-top: 30px;
        }
        
        .essay-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            position: relative;
            transition: transform 0.3s ease;
        }
        
        .essay-item:hover {
            transform: translateY(-3px);
        }
        
        .essay-item.pinned {
            border-left: 4px solid #FFD700;
            background: rgba(255, 215, 0, 0.05);
        }
        
        .pinned-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #FFD700;
            color: #333;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .category-badge {
            display: inline-block;
            background: rgba(0, 161, 214, 0.2);
            color: #00a1d6;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-bottom: 10px;
        }
        
        .essay-item h4 {
            color: #FFD700;
            margin-bottom: 10px;
            padding-right: 80px;
        }
        
        .essay-item .essay-date {
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .essay-item .essay-content {
            color: #ddd;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .essay-media {
            margin: 15px 0;
        }
        
        .essay-media img, .essay-media video {
            max-width: 100%;
            max-height: 400px;
            border-radius: 8px;
            transition: transform 0.3s ease;
        }
        
        .essay-media img:hover {
            transform: scale(1.02);
        }
        
        .essay-actions {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .essay-action {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #aaa;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .essay-action:hover {
            color: #FFD700;
        }
        
        .share-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .share-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #fff;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }
        
        .share-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
        }
        
        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .user-name {
            font-weight: bold;
        }
        
        .admin-tools {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .admin-tools h3 {
            margin-bottom: 10px;
            color: #FFD700;
        }
        
        .tool-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 50px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .visitor-stats {
            margin-top: 10px;
            font-size: 0.8rem;
            color: #888;
        }
        
        @media (max-width: 768px) {
            .profile-section {
                flex-direction: column;
                text-align: center;
            }
            
            .avatar {
                margin-right: 0;
                margin-bottom: 20px;
                align-self: center;
            }
            
            .clock-container {
                margin-left: 0;
                margin-top: 20px;
                min-width: auto;
                width: 100%;
            }
            
            .nav-links {
                display: none;
            }
            
            .mobile-menu-toggle {
                display: block;
            }
            
            .tags-container {
                justify-content: center;
            }
            
            .blog-section, .essay-section {
                padding: 20px;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .essay-controls {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .essay-actions {
                flex-wrap: wrap;
            }
            
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .tool-buttons {
                flex-direction: column;
            }
            
            .essay-media img, .essay-media video {
                max-height: 250px;
            }
            
            /* 移动设备跳过按钮样式 */
            .skip-btn {
                bottom: 20px;
                right: 20px;
                padding: 14px 24px;
                font-size: 1.1rem;
                background: rgba(255, 255, 255, 0.4);
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            }
            
            .play-btn {
                bottom: 80px;
                right: 20px;
                padding: 14px 24px;
                font-size: 1.1rem;
            }
            
            .loading-text {
                font-size: 2rem;
            }
            
            .loading-subtext {
                font-size: 1.1rem;
            }
            
            .wallpaper-selector {
                top: 80px;
                right: 10px;
                max-width: 180px;
            }
        }
        
        @media (min-width: 769px) {
            .mobile-nav-links {
                display: none !important;
            }
        }
        
        /* 针对非常小的屏幕优化 */
        @media (max-width: 480px) {
            .skip-btn {
                bottom: 15px;
                right: 15px;
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .play-btn {
                bottom: 70px;
                right: 15px;
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .loading-text {
                font-size: 1.8rem;
            }
            
            .loading-subtext {
                font-size: 1rem;
            }
            
            .wallpaper-selector {
                top: 70px;
                right: 5px;
                max-width: 160px;
            }
        }
    </style>
</head>
<body>
    <!-- 开场动画 -->
    <div id="loading-screen">
        <div class="loading-content">
            <!-- 移除视频自动播放，改为用户交互后播放 -->
            <video muted playsinline id="opening-video">
                <source src="opening-animation.mp4" type="video/mp4">
                您的浏览器不支持视频播放
            </video>
            <img id="opening-image" src="image2.jpg" alt="开场图片">
            <div class="loading-overlay">
                <div class="loading-text">风也曾辉煌过</div>
                <div class="loading-subtext">与你的日常，就是奇迹</div>
                <button class="skip-btn" id="skip-btn">跳过开场</button>
                <!-- 添加播放按钮 -->
                <button class="play-btn" id="play-btn">播放动画</button>
            </div>
        </div>
    </div>
    
    <!-- 壁纸选择器 -->
    <div class="wallpaper-selector">
        <div class="wallpaper-title">壁纸选择</div>
        <div class="wallpaper-options" id="wallpaper-options">
            <!-- 壁纸选项将通过JavaScript动态添加 -->
        </div>
    </div>
    
    <!-- 页面内容 -->
    <div class="background-container" id="background-container">
        <div class="overlay"></div>
    </div>
    
    <div class="container" id="main-content">
        <nav>
            <div class="logo">
                <i class="fas fa-blog"></i>
                风也曾辉煌过
            </div>
            
            <div class="nav-links">
                <a href="#">首页</a>
                <a href="mailto:3553074358@qq.com">QQ邮箱</a>
                <a href="https://space.bilibili.com/3546389980121532?spm_id_from=333.1007.0.0" target="_blank">Bilibili</a>
                <a href="#">关于</a>
            </div>
            
            <button class="mobile-menu-toggle" id="mobile-menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
        </nav>
        
        <div class="mobile-nav-links" id="mobile-nav-links">
            <a href="#">首页</a>
            <a href="mailto:3553074358@qq.com">QQ邮箱</a>
            <a href="https://space.bilibili.com/3546389980121532?spm_id_from=333.1007.0.0" target="_blank">Bilibili</a>
            <a href="#">关于</a>
        </div>
        
        <section class="profile-section">
            <div class="avatar" id="avatar-container">
                <!-- 头像将由JavaScript动态加载 -->
            </div>
            <div class="profile-info">
                <h1>风也曾辉煌过</h1>
                <div class="username">3553074358@QQ.com</div>
                <p>与你的日常，就是奇迹。</p>
                
                <div class="tags-section">
                    <div class="tags-title">个人标签</div>
                    <div class="tags-container">
                        <div class="tag">玄不救非</div>
                        <div class="tag">氪不改命</div>
                        <div class="tag">二次元</div>
                        <div class="tag">漫展</div>
                        <div class="tag">宅男拯救世界</div>
                        <div class="tag">萌新求带</div>
                        <div class="tag">手办</div>
                        <div class="tag">天然呆</div>
                        <div class="tag">中二病晚期</div>
                        <div class="tag">欧皇</div>
                        <div class="tag">碧蓝档案</div>
                    </div>
                </div>
            </div>
            
            <!-- 北京时间时钟 -->
            <div class="clock-container">
                <div class="clock-title">北京时间</div>
                <div class="clock">
                    <div class="date-display" id="date-display">2023年10月1日 星期日</div>
                    <div class="time-display" id="time-display">
                        <span class="time-segment" id="hours">00</span>
                        <span class="time-separator">:</span>
                        <span class="time-segment" id="minutes">00</span>
                        <span class="time-separator">:</span>
                        <span class="time-segment" id="seconds">00</span>
                    </div>
                    <div class="timezone">UTC+8 中国标准时间</div>
                </div>
            </div>
        </section>
        
        <section class="blog-section">
            <h2 class="section-title">个人经验</h2>
            <div class="blog-content">
                
                <div class="theme-summary">
                    <h3 class="theme-title">担当与信任，是写给我们青春的童话。</h3>
                    <p>这个主题的核心是<span class="theme-core">"守护"</span>。它讲述了我们即使已不再是少年，也依然可以理解相信纯粹的情感，并担当起守护他人笑容的责任。在复杂的世界里，这种选择本身就是一首温暖而有力的叙事诗。</p>
                </div>
                
                <div class="theme-summary">
                    <h3 class="theme-title">平凡日常本身，就闪耀着不凡的人性光辉。</h3>
                    <p>这个主题的核心是<span class="theme-core">"发现"</span>。它提醒我们，生命的诗意并非总存在于宏大的史诗中，更蕴藏在每一段看似普通的日常里。用心去感受和倾听，我们就能在平凡的时刻中，发现最真实、最动人的闪耀之处。</p>
                </div>
                
                <div class="theme-summary">
                    <h3 class="theme-title">保持纯粹之心，亲手创造理想的奇迹。</h3>
                    <p>这个主题的核心是<span class="theme-core">"信念"</span>。它强调，真正的成熟不是对现实妥协，而是在认清现实之后，依然固执地相信理想，并为之付诸行动。这份看似天真的纯粹信念，恰恰是能够改变现实、创造奇迹的起点。</p>
                </div>
                
            </div>
        </section>
        
        <!-- 随笔区域 -->
        <section class="essay-section">
            <h2 class="section-title">个人随笔</h2>
            
            <!-- 搜索框 -->
            <div class="search-box">
                <input type="text" id="essay-search" placeholder="搜索随笔标题或内容...">
                <i class="fas fa-search"></i>
            </div>
            
            <!-- 统计面板 -->
            <div class="stats-panel" id="stats-panel" style="display: none;">
                <h3>数据统计</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="total-essays">0</div>
                        <div class="stat-label">总随笔</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="pinned-essays">0</div>
                        <div class="stat-label">置顶</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="image-essays">0</div>
                        <div class="stat-label">含图片</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="video-essays">0</div>
                        <div class="stat-label">含视频</div>
                    </div>
                </div>
            </div>
            
            <!-- 管理员工具 -->
            <div class="admin-tools" id="admin-tools" style="display: none;">
                <h3>管理员工具</h3>
                <div class="tool-buttons">
                    <button class="btn btn-secondary" id="export-btn">导出数据</button>
                    <button class="btn btn-secondary" id="import-btn">导入数据</button>
                    <input type="file" id="import-file" accept=".json" style="display: none;">
                    <button class="btn btn-secondary" id="clear-draft-btn">清除草稿</button>
                </div>
            </div>
            
            <!-- 登录表单 -->
            <div class="login-form" id="login-form">
                <div class="form-group">
                    <label for="username">用户名</label>
                    <input type="text" id="username" placeholder="请输入用户名">
                </div>
                <div class="form-group">
                    <label for="password">密码</label>
                    <input type="password" id="password" placeholder="请输入密码">
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" id="login-btn">管理员登录</button>
                    <button class="btn btn-secondary" id="guest-btn">游客浏览</button>
                </div>
            </div>
            
            <!-- 草稿提示 -->
            <div class="draft-notice" id="draft-notice" style="display: none;">
                <span>检测到未保存的草稿</span>
                <button class="btn btn-small btn-secondary" id="load-draft-btn">加载草稿</button>
            </div>
            
            <!-- 用户信息 -->
            <div class="user-info" id="user-info" style="display: none;">
                <div class="user-avatar">
                    <img src="1000088249.jpg" alt="用户头像">
                </div>
                <div class="user-name" id="user-name"></div>
                <button class="btn btn-secondary" id="logout-btn">退出登录</button>
            </div>
            
            <!-- 随笔发布表单 -->
            <div class="essay-form" id="essay-form">
                <div class="form-group">
                    <label for="essay-title">随笔标题</label>
                    <input type="text" id="essay-title" placeholder="请输入随笔标题">
                </div>
                <div class="form-group">
                    <label for="essay-category">分类</label>
                    <select id="essay-category">
                        <option value="日常">日常</option>
                        <option value="技术">技术</option>
                        <option value="游戏">游戏</option>
                        <option value="动漫">动漫</option>
                        <option value="思考">思考</option>
                        <option value="其他">其他</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="essay-content">随笔内容</label>
                    <textarea id="essay-content" placeholder="请输入随笔内容"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="essay-image">图片URL (可选)</label>
                    <input type="text" id="essay-image" placeholder="输入图片链接">
                </div>
                
                <div class="form-group">
                    <label for="essay-video">视频URL (可选)</label>
                    <input type="text" id="essay-video" placeholder="输入视频链接 (支持YouTube/Bilibili等)">
                </div>
                
                <div class="media-preview" id="media-preview">
                    <!-- 媒体预览将在这里显示 -->
                </div>
                
                <div class="essay-controls">
                    <div class="checkbox-group">
                        <input type="checkbox" id="pin-essay">
                        <label for="pin-essay">置顶此随笔</label>
                    </div>
                    <button class="btn btn-primary" id="publish-btn">发布随笔 (Ctrl+Enter)</button>
                </div>
            </div>
            
            <!-- 随笔列表 -->
            <div class="essay-list" id="essay-list">
                <!-- 随笔内容将通过JavaScript动态添加 -->
            </div>
        </section>
        
        <footer>
            <p>© 2023 风也曾辉煌过的个人博客 | 记录生活，分享感悟</p>
            <div class="visitor-stats" id="visitor-stats">
                <!-- 访客统计将在这里显示 -->
            </div>
        </footer>
    </div>

    <script>
        // 开场动画控制
        function startOpeningAnimation() {
            const loadingScreen = document.getElementById('loading-screen');
            const openingVideo = document.getElementById('opening-video');
            const openingImage = document.getElementById('opening-image');
            const skipBtn = document.getElementById('skip-btn');
            const playBtn = document.getElementById('play-btn');
            const mainContent = document.getElementById('main-content');
            
            // 确保跳过按钮可见
            skipBtn.style.display = 'block';
            playBtn.style.display = 'block';
            
            // 跳过开场动画
            skipBtn.addEventListener('click', function() {
                finishOpeningAnimation();
            });
            
            // 播放开场动画
            playBtn.addEventListener('click', function() {
                playBtn.style.display = 'none';
                skipBtn.style.display = 'none';
                
                // 隐藏文字
                document.querySelector('.loading-text').style.display = 'none';
                document.querySelector('.loading-subtext').style.display = 'none';
                
                // 尝试播放视频
                tryPlayVideo();
            });
            
            // 尝试播放视频
            function tryPlayVideo() {
                // 先尝试播放视频
                const playPromise = openingVideo.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        // 视频播放成功
                        console.log('视频播放成功');
                        openingVideo.style.display = 'block';
                        openingImage.style.display = 'none';
                        
                        // 视频播放结束后自动进入主页面
                        openingVideo.addEventListener('ended', function() {
                            finishOpeningAnimation();
                        });
                    }).catch(error => {
                        // 视频播放失败，显示图片
                        console.log('视频播放失败，使用图片替代:', error);
                        fallbackToImage();
                    });
                }
            }
            
            // 备用图片方案
            function fallbackToImage() {
                openingVideo.style.display = 'none';
                openingImage.style.display = 'block';
                
                // 确保跳过按钮可见
                skipBtn.style.display = 'block';
                
                // 3秒后自动进入主页面
                setTimeout(() => {
                    finishOpeningAnimation();
                }, 3000);
            }
            
            // 如果视频加载失败，直接使用图片
            openingVideo.addEventListener('error', function() {
                console.log('开场动画视频加载失败，使用图片替代');
                fallbackToImage();
            });
            
            function finishOpeningAnimation() {
                loadingScreen.style.opacity = '0';
                loadingScreen.style.visibility = 'hidden';
                
                mainContent.style.opacity = '1';
                mainContent.style.transform = 'translateY(0)';
                
                // 初始化页面功能
                initializePage();
            }
            
            // 初始显示播放按钮，不自动播放
            playBtn.style.display = 'block';
            skipBtn.style.display = 'block';
        }
        
        // 壁纸管理功能
        function setupWallpaperManager() {
            const wallpapers = [
                { id: 'default', name: '默认背景', url: 'image2.jpg' },
                { id: 'wallpaper1', name: '星空之夜', url: 'wallpaper1.jpg' },
                { id: 'wallpaper2', name: '虚拟世界', url: 'wallpaper2.jpg' },
                { id: 'wallpaper3', name: '城市灯火', url: 'wallpaper3.jpg' },
                { id: 'wallpaper4', name: '海洋深处', url: 'wallpaper4.jpg' }
            ];
            
            const wallpaperOptions = document.getElementById('wallpaper-options');
            const bgContainer = document.getElementById('background-container');
            
            // 渲染壁纸选项
            function renderWallpaperOptions() {
                wallpaperOptions.innerHTML = '';
                
                wallpapers.forEach(wallpaper => {
                    const option = document.createElement('div');
                    option.className = 'wallpaper-option';
                    option.dataset.id = wallpaper.id;
                    
                    option.innerHTML = `
                        <div class="wallpaper-preview" style="background-image: url('${wallpaper.url}')"></div>
                        <div class="wallpaper-name">${wallpaper.name}</div>
                    `;
                    
                    option.addEventListener('click', () => {
                        selectWallpaper(wallpaper.id);
                    });
                    
                    wallpaperOptions.appendChild(option);
                });
            }
            
            // 选择壁纸
            function selectWallpaper(id) {
                const selectedWallpaper = wallpapers.find(w => w.id === id);
                if (!selectedWallpaper) return;
                
                // 更新背景
                bgContainer.style.backgroundImage = `url('${selectedWallpaper.url}')`;
                
                // 更新活跃状态
                document.querySelectorAll('.wallpaper-option').forEach(option => {
                    option.classList.remove('active');
                });
                document.querySelector(`.wallpaper-option[data-id="${id}"]`).classList.add('active');
                
                // 保存到本地存储
                localStorage.setItem('selected-wallpaper', id);
            }
            
            // 随机切换壁纸
            function randomWallpaper() {
                const randomIndex = Math.floor(Math.random() * wallpapers.length);
                selectWallpaper(wallpapers[randomIndex].id);
            }
            
            // 初始化壁纸
            function initWallpaper() {
                // 检查是否有保存的壁纸
                const savedWallpaper = localStorage.getItem('selected-wallpaper');
                
                // 30%概率随机切换壁纸
                if (!savedWallpaper && Math.random() < 0.3) {
                    randomWallpaper();
                } else if (savedWallpaper) {
                    // 使用保存的壁纸
                    selectWallpaper(savedWallpaper);
                } else {
                    // 使用默认壁纸
                    selectWallpaper('default');
                }
            }
            
            // 初始化
            renderWallpaperOptions();
            initWallpaper();
        }
        
        // 初始化页面功能
        function initializePage() {
            loadBackground();
            loadAvatar();
            trackVisitor();
            startClock();
            setupWallpaperManager();
            
            setupMobileMenu();
            setupLoginSystem();
            
            const navLinks = document.querySelectorAll('.nav-links a');
            navLinks.forEach(link => {
                link.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                });
                link.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
            
            const tags = document.querySelectorAll('.tag');
            tags.forEach(tag => {
                tag.addEventListener('click', function() {
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 200);
                    
                    console.log('点击了标签: ' + this.textContent);
                });
            });
            
            const elements = document.querySelectorAll('.profile-section, .blog-section, .essay-section');
            elements.forEach((el, index) => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    el.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, 300 + index * 200);
            });
        }
        
        // 北京时间时钟功能
        function startClock() {
            function updateClock() {
                const now = new Date();
                
                // 转换为北京时间 (UTC+8)
                const beijingTime = new Date(now.getTime() + (8 * 60 * 60 * 1000));
                
                // 获取日期信息
                const year = beijingTime.getUTCFullYear();
                const month = beijingTime.getUTCMonth() + 1;
                const date = beijingTime.getUTCDate();
                const day = beijingTime.getUTCDay();
                
                // 获取时间信息
                const hours = beijingTime.getUTCHours().toString().padStart(2, '0');
                const minutes = beijingTime.getUTCMinutes().toString().padStart(2, '0');
                const seconds = beijingTime.getUTCSeconds().toString().padStart(2, '0');
                
                // 星期几
                const weekdays = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];
                const weekday = weekdays[day];
                
                // 更新日期显示
                document.getElementById('date-display').textContent = `${year}年${month}月${date}日 ${weekday}`;
                
                // 更新时间显示
                document.getElementById('hours').textContent = hours;
                document.getElementById('minutes').textContent = minutes;
                document.getElementById('seconds').textContent = seconds;
            }
            
            // 立即更新一次
            updateClock();
            
            // 每秒更新一次
            setInterval(updateClock, 1000);
        }
        
        // 图片加载函数
        function loadImage(element, src, alt, onSuccess, onError) {
            const img = new Image();
            img.onload = function() {
                element.innerHTML = '';
                element.appendChild(img);
                if (onSuccess) onSuccess();
            };
            img.onerror = function() {
                if (onError) onError();
            };
            img.src = src;
            img.alt = alt;
        }

        function loadBackground() {
            // 背景现在由壁纸管理器处理
            console.log('背景加载由壁纸管理器处理');
        }

        function loadAvatar() {
            const avatarContainer = document.getElementById('avatar-container');
            
            loadImage(avatarContainer, '1000088249.jpg', '风也曾辉煌过的头像',
                function() {
                    console.log('头像图片加载成功');
                },
                function() {
                    console.log('主头像加载失败，尝试备用图片');
                    loadImage(avatarContainer, 'image1.jpg', '风也曾辉煌过的头像',
                        function() {
                            console.log('备用头像图片加载成功');
                        },
                        function() {
                            console.log('所有头像图片加载失败，显示默认头像');
                            avatarContainer.innerHTML = '<i class="fas fa-user" style="font-size: 60px; color: #888;"></i>';
                        }
                    );
                }
            );
        }

        function setupMobileMenu() {
            const menuToggle = document.getElementById('mobile-menu-toggle');
            const mobileNavLinks = document.getElementById('mobile-nav-links');
            
            if (menuToggle && mobileNavLinks) {
                menuToggle.addEventListener('click', function() {
                    mobileNavLinks.classList.toggle('active');
                    
                    const icon = menuToggle.querySelector('i');
                    if (mobileNavLinks.classList.contains('active')) {
                        icon.classList.remove('fa-bars');
                        icon.classList.add('fa-times');
                    } else {
                        icon.classList.remove('fa-times');
                        icon.classList.add('fa-bars');
                    }
                });
                
                document.addEventListener('click', function(event) {
                    if (!menuToggle.contains(event.target) && !mobileNavLinks.contains(event.target)) {
                        mobileNavLinks.classList.remove('active');
                        const icon = menuToggle.querySelector('i');
                        icon.classList.remove('fa-times');
                        icon.classList.add('fa-bars');
                    }
                });
            }
        }

        // 访客统计
        function trackVisitor() {
            let stats = JSON.parse(localStorage.getItem('visitor-stats') || '{}');
            const today = new Date().toDateString();
            
            if (!stats.firstVisit) {
                stats.firstVisit = new Date().toISOString();
            }
            
            stats.totalVisits = (stats.totalVisits || 0) + 1;
            stats.lastVisit = new Date().toISOString();
            
            // 每日访问统计
            stats.dailyVisits = stats.dailyVisits || {};
            stats.dailyVisits[today] = (stats.dailyVisits[today] || 0) + 1;
            
            localStorage.setItem('visitor-stats', JSON.stringify(stats));
            
            // 显示访客统计
            const visitorStats = document.getElementById('visitor-stats');
            if (visitorStats) {
                const firstVisit = new Date(stats.firstVisit).toLocaleDateString('zh-CN');
                visitorStats.innerHTML = `总访问: ${stats.totalVisits} | 首次访问: ${firstVisit}`;
            }
        }

        // 登录系统功能
        function setupLoginSystem() {
            const loginForm = document.getElementById('login-form');
            const userInfo = document.getElementById('user-info');
            const essayForm = document.getElementById('essay-form');
            const essayList = document.getElementById('essay-list');
            const loginBtn = document.getElementById('login-btn');
            const guestBtn = document.getElementById('guest-btn');
            const logoutBtn = document.getElementById('logout-btn');
            const publishBtn = document.getElementById('publish-btn');
            const userName = document.getElementById('user-name');
            const mediaPreview = document.getElementById('media-preview');
            const essayImageInput = document.getElementById('essay-image');
            const essayVideoInput = document.getElementById('essay-video');
            const statsPanel = document.getElementById('stats-panel');
            const adminTools = document.getElementById('admin-tools');
            const searchInput = document.getElementById('essay-search');
            const draftNotice = document.getElementById('draft-notice');
            const loadDraftBtn = document.getElementById('load-draft-btn');
            const exportBtn = document.getElementById('export-btn');
            const importBtn = document.getElementById('import-btn');
            const importFile = document.getElementById('import-file');
            const clearDraftBtn = document.getElementById('clear-draft-btn');
            
            // 管理员凭据
            const adminCredentials = {
                username: '风也曾辉煌过',
                password: '@L13437345293'
            };
            
            // 随笔分类
            const categories = ['日常', '技术', '游戏', '动漫', '思考', '其他'];
            
            // 从本地存储加载随笔
            let essays = JSON.parse(localStorage.getItem('essays')) || [];
            
            // 渲染随笔列表
            function renderEssays(essaysToRender = essays) {
                essayList.innerHTML = '';
                
                if (essaysToRender.length === 0) {
                    essayList.innerHTML = '<p style="text-align: center; color: #aaa;">暂无随笔</p>';
                    return;
                }
                
                // 先显示置顶的随笔，然后按时间倒序显示其他随笔
                const sortedEssays = [...essaysToRender].sort((a, b) => {
                    if (a.pinned && !b.pinned) return -1;
                    if (!a.pinned && b.pinned) return 1;
                    return new Date(b.timestamp) - new Date(a.timestamp);
                });
                
                sortedEssays.forEach((essay, index) => {
                    const essayItem = document.createElement('div');
                    essayItem.className = `essay-item ${essay.pinned ? 'pinned' : ''}`;
                    
                    let mediaHTML = '';
                    if (essay.image) {
                        mediaHTML = `<div class="essay-media"><img src="${essay.image}" alt="随笔图片"></div>`;
                    } else if (essay.video) {
                        // 简单的视频嵌入处理
                        mediaHTML = `<div class="essay-media"><video controls><source src="${essay.video}" type="video/mp4">您的浏览器不支持视频播放</video></div>`;
                    }
                    
                    // 分享功能
                    const shareText = `看看这篇随笔: ${essay.title}`;
                    
                    essayItem.innerHTML = `
                        ${essay.pinned ? '<div class="pinned-badge">置顶</div>' : ''}
                        <div class="category-badge">${essay.category || '日常'}</div>
                        <h4>${essay.title}</h4>
                        <div class="essay-date">${essay.date}</div>
                        <div class="essay-content">${essay.content}</div>
                        ${mediaHTML}
                        <div class="share-buttons">
                            <button class="share-btn" onclick="shareToWeibo('${shareText}')">微博</button>
                            <button class="share-btn" onclick="shareToQQ('${shareText}')">QQ</button>
                            <button class="share-btn" onclick="copyLink()">复制链接</button>
                            <button class="share-btn" onclick="exportToMarkdown(${index})">导出Markdown</button>
                        </div>
                        <div class="essay-actions">
                            <div class="essay-action">
                                <i class="far fa-heart"></i>
                                <span>${essay.likes || 0}</span>
                            </div>
                            <div class="essay-action">
                                <i class="far fa-comment"></i>
                                <span>${essay.comments || 0}</span>
                            </div>
                            ${localStorage.getItem('isLoggedIn') === 'true' ? 
                                `<div class="essay-action" onclick="togglePin(${index})">
                                    <i class="fas fa-thumbtack"></i>
                                    <span>${essay.pinned ? '取消置顶' : '置顶'}</span>
                                </div>
                                <div class="essay-action" onclick="deleteEssay(${index})">
                                    <i class="far fa-trash-alt"></i>
                                    <span>删除</span>
                                </div>` : ''}
                        </div>
                    `;
                    essayList.appendChild(essayItem);
                });
            }
            
            // 更新统计数据
            function updateStats() {
                const totalEssays = essays.length;
                const pinnedEssays = essays.filter(e => e.pinned).length;
                const imageEssays = essays.filter(e => e.image).length;
                const videoEssays = essays.filter(e => e.video).length;
                
                document.getElementById('total-essays').textContent = totalEssays;
                document.getElementById('pinned-essays').textContent = pinnedEssays;
                document.getElementById('image-essays').textContent = imageEssays;
                document.getElementById('video-essays').textContent = videoEssays;
            }
            
            // 搜索功能
            function setupSearch() {
                searchInput.addEventListener('input', function(e) {
                    const searchTerm = e.target.value.toLowerCase();
                    if (searchTerm) {
                        const filteredEssays = essays.filter(essay => 
                            essay.title.toLowerCase().includes(searchTerm) || 
                            essay.content.toLowerCase().includes(searchTerm) ||
                            (essay.category && essay.category.toLowerCase().includes(searchTerm))
                        );
                        renderEssays(filteredEssays);
                    } else {
                        renderEssays();
                    }
                });
            }
            
            // 预览媒体
            function previewMedia() {
                const imageUrl = essayImageInput.value;
                const videoUrl = essayVideoInput.value;
                
                mediaPreview.innerHTML = '';
                mediaPreview.style.display = 'none';
                
                if (imageUrl) {
                    const img = document.createElement('img');
                    img.src = imageUrl;
                    img.onerror = function() {
                        mediaPreview.innerHTML = '<p style="color: #ff6b6b;">图片加载失败，请检查URL</p>';
                        mediaPreview.style.display = 'block';
                    };
                    img.onload = function() {
                        mediaPreview.appendChild(img);
                        mediaPreview.style.display = 'block';
                    };
                } else if (videoUrl) {
                    const video = document.createElement('video');
                    video.controls = true;
                    video.innerHTML = `<source src="${videoUrl}" type="video/mp4">您的浏览器不支持视频播放`;
                    mediaPreview.appendChild(video);
                    mediaPreview.style.display = 'block';
                }
            }
            
            // 草稿自动保存
            function setupAutoSave() {
                const fields = ['essay-title', 'essay-content', 'essay-image', 'essay-video', 'essay-category'];
                let saveTimeout;
                
                fields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    if (field) {
                        field.addEventListener('input', function() {
                            clearTimeout(saveTimeout);
                            saveTimeout = setTimeout(() => {
                                const draft = {};
                                fields.forEach(id => {
                                    const element = document.getElementById(id);
                                    if (element) {
                                        draft[id] = element.value || '';
                                    }
                                });
                                draft['pin-essay'] = document.getElementById('pin-essay').checked;
                                localStorage.setItem('essay-draft', JSON.stringify(draft));
                                
                                // 显示草稿提示
                                const hasContent = Object.values(draft).some(value => 
                                    value && value.toString().trim() !== ''
                                );
                                draftNotice.style.display = hasContent ? 'flex' : 'none';
                            }, 1000);
                        });
                    }
                });
                
                // 加载草稿
                loadDraftBtn.addEventListener('click', function() {
                    const draft = JSON.parse(localStorage.getItem('essay-draft') || '{}');
                    fields.forEach(id => {
                        const field = document.getElementById(id);
                        if (field && draft[id]) {
                            field.value = draft[id];
                        }
                    });
                    if (draft['pin-essay']) {
                        document.getElementById('pin-essay').checked = true;
                    }
                    draftNotice.style.display = 'none';
                    previewMedia();
                });
                
                // 清除草稿
                clearDraftBtn.addEventListener('click', function() {
                    localStorage.removeItem('essay-draft');
                    fields.forEach(id => {
                        const field = document.getElementById(id);
                        if (field) field.value = '';
                    });
                    document.getElementById('pin-essay').checked = false;
                    draftNotice.style.display = 'none';
                    mediaPreview.style.display = 'none';
                });
                
                // 初始检查草稿
                const draft = JSON.parse(localStorage.getItem('essay-draft') || '{}');
                const hasDraft = Object.values(draft).some(value => 
                    value && value.toString().trim() !== ''
                );
                if (hasDraft) {
                    draftNotice.style.display = 'flex';
                }
            }
            
            // 数据导出
            function setupDataExport() {
                exportBtn.addEventListener('click', function() {
                    const data = {
                        essays: essays,
                        exportDate: new Date().toISOString(),
                        version: '1.0'
                    };
                    const dataStr = JSON.stringify(data, null, 2);
                    const dataBlob = new Blob([dataStr], {type: 'application/json'});
                    const url = URL.createObjectURL(dataBlob);
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = `essays_backup_${new Date().toISOString().split('T')[0]}.json`;
                    link.click();
                    setTimeout(() => URL.revokeObjectURL(url), 100);
                });
                
                importBtn.addEventListener('click', function() {
                    importFile.click();
                });
                
                importFile.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const data = JSON.parse(e.target.result);
                            if (data.essays && Array.isArray(data.essays)) {
                                if (confirm(`确定要导入 ${data.essays.length} 篇随笔吗？这将覆盖现有数据。`)) {
                                    essays = data.essays;
                                    localStorage.setItem('essays', JSON.stringify(essays));
                                    renderEssays();
                                    updateStats();
                                    alert('数据导入成功！');
                                }
                            } else {
                                alert('文件格式不正确！');
                            }
                        } catch (error) {
                            alert('文件读取失败！');
                        }
                    };
                    reader.readAsText(file);
                    // 重置文件输入
                    importFile.value = '';
                });
            }
            
            // 键盘快捷键
            function setupKeyboardShortcuts() {
                document.addEventListener('keydown', function(e) {
                    // Ctrl + Enter 发布随笔
                    if (e.ctrlKey && e.key === 'Enter') {
                        const publishBtn = document.getElementById('publish-btn');
                        if (publishBtn && publishBtn.style.display !== 'none') {
                            publishBtn.click();
                        }
                    }
                    
                    // ESC 清除搜索
                    if (e.key === 'Escape') {
                        searchInput.value = '';
                        renderEssays();
                    }
                });
            }
            
            // 管理员登录
            loginBtn.addEventListener('click', function() {
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                if (username === adminCredentials.username && password === adminCredentials.password) {
                    // 登录成功
                    loginForm.style.display = 'none';
                    userInfo.style.display = 'flex';
                    essayForm.style.display = 'block';
                    statsPanel.style.display = 'block';
                    adminTools.style.display = 'block';
                    userName.textContent = '管理员';
                    
                    // 保存登录状态
                    localStorage.setItem('isLoggedIn', 'true');
                    
                    // 更新统计数据
                    updateStats();
                } else {
                    alert('用户名或密码错误！');
                }
            });
            
            // 游客登录
            guestBtn.addEventListener('click', function() {
                loginForm.style.display = 'none';
                userInfo.style.display = 'flex';
                userName.textContent = '游客';
                statsPanel.style.display = 'block';
                
                // 保存游客状态
                localStorage.setItem('isGuest', 'true');
                
                // 更新统计数据
                updateStats();
            });
            
            // 退出登录
            logoutBtn.addEventListener('click', function() {
                userInfo.style.display = 'none';
                loginForm.style.display = 'block';
                essayForm.style.display = 'none';
                statsPanel.style.display = 'none';
                adminTools.style.display = 'none';
                
                // 清除登录状态
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('isGuest');
            });
            
            // 发布随笔
            publishBtn.addEventListener('click', function() {
                const title = document.getElementById('essay-title').value;
                const content = document.getElementById('essay-content').value;
                const category = document.getElementById('essay-category').value;
                const image = document.getElementById('essay-image').value;
                const video = document.getElementById('essay-video').value;
                const pinned = document.getElementById('pin-essay').checked;
                
                if (!title || !content) {
                    alert('请填写标题和内容！');
                    return;
                }
                
                // 如果同时有图片和视频，只保留一个
                let media = {};
                if (image) {
                    media.image = image;
                } else if (video) {
                    media.video = video;
                }
                
                const newEssay = {
                    title: title,
                    content: content,
                    category: category,
                    date: new Date().toLocaleString('zh-CN'),
                    timestamp: new Date().toISOString(),
                    pinned: pinned,
                    likes: 0,
                    comments: 0,
                    ...media
                };
                
                essays.unshift(newEssay);
                localStorage.setItem('essays', JSON.stringify(essays));
                
                // 清空表单
                document.getElementById('essay-title').value = '';
                document.getElementById('essay-content').value = '';
                document.getElementById('essay-image').value = '';
                document.getElementById('essay-video').value = '';
                document.getElementById('pin-essay').checked = false;
                mediaPreview.style.display = 'none';
                
                // 清除草稿
                localStorage.removeItem('essay-draft');
                draftNotice.style.display = 'none';
                
                // 重新渲染随笔列表
                renderEssays();
                updateStats();
                
                alert('随笔发布成功！');
            });
            
            // 检查登录状态
            function checkLoginStatus() {
                if (localStorage.getItem('isLoggedIn') === 'true') {
                    loginForm.style.display = 'none';
                    userInfo.style.display = 'flex';
                    essayForm.style.display = 'block';
                    statsPanel.style.display = 'block';
                    adminTools.style.display = 'block';
                    userName.textContent = '管理员';
                    updateStats();
                } else if (localStorage.getItem('isGuest') === 'true') {
                    loginForm.style.display = 'none';
                    userInfo.style.display = 'flex';
                    statsPanel.style.display = 'block';
                    userName.textContent = '游客';
                    updateStats();
                }
            }
            
            // 初始化
            checkLoginStatus();
            renderEssays();
            setupSearch();
            setupAutoSave();
            setupDataExport();
            setupKeyboardShortcuts();
            
            // 监听媒体输入变化
            essayImageInput.addEventListener('input', previewMedia);
            essayVideoInput.addEventListener('input', previewMedia);
        }

        // 切换置顶状态
        function togglePin(index) {
            let essays = JSON.parse(localStorage.getItem('essays')) || [];
            essays[index].pinned = !essays[index].pinned;
            localStorage.setItem('essays', JSON.stringify(essays));
            
            // 重新渲染随笔列表
            document.querySelector('.essay-list').innerHTML = '';
            setupLoginSystem();
        }

        // 删除随笔
        function deleteEssay(index) {
            if (confirm('确定要删除这篇随笔吗？')) {
                let essays = JSON.parse(localStorage.getItem('essays')) || [];
                essays.splice(index, 1);
                localStorage.setItem('essays', JSON.stringify(essays));
                
                // 重新渲染随笔列表
                document.querySelector('.essay-list').innerHTML = '';
                setupLoginSystem();
            }
        }

        // 分享功能
        function shareToWeibo(text) {
            const url = encodeURIComponent(window.location.href);
            const shareUrl = `http://service.weibo.com/share/share.php?url=${url}&title=${encodeURIComponent(text)}`;
            window.open(shareUrl, '_blank');
        }
        
        function shareToQQ(text) {
            const url = encodeURIComponent(window.location.href);
            const shareUrl = `https://connect.qq.com/widget/shareqq/index.html?url=${url}&title=${encodeURIComponent(text)}`;
            window.open(shareUrl, '_blank');
        }
        
        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                alert('链接已复制到剪贴板！');
            });
        }
        
        // 导出为Markdown
        function exportToMarkdown(index) {
            const essays = JSON.parse(localStorage.getItem('essays')) || [];
            const essay = essays[index];
            
            let content = `# ${essay.title}\n\n`;
            content += `> 发布时间: ${essay.date}\n`;
            content += `> 分类: ${essay.category || '日常'}\n\n`;
            content += `${essay.content}\n\n`;
            
            if (essay.image) {
                content += `![图片](${essay.image})\n\n`;
            }
            
            const blob = new Blob([content], {type: 'text/markdown'});
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `${essay.title}.md`;
            link.click();
            setTimeout(() => URL.revokeObjectURL(url), 100);
        }

        // 页面加载完成后启动开场动画
        document.addEventListener('DOMContentLoaded', function() {
            startOpeningAnimation();
        });
    </script>
</body>
</html>

